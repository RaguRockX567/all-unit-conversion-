<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OxygenOS Weight Converter</title>
    <style>
        :root {
            --bg-color: #000000;
            --card-color: #1c1c1c;
            --accent-color: #ff9f0a;
            --text-main: #ffffff;
            --text-dim: #888888;
            --header-bg: #111;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            background-color: var(--bg-color); color: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            overflow: hidden;
        }

        .app-container {
            display: flex; flex-direction: column; height: 100dvh;
            padding: 16px; max-width: 500px; margin: 0 auto;
        }

        /* --- UNIT SELECTION MODAL --- */
        #selector-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-color); z-index: 100;
            display: none; flex-direction: column;
        }

        .overlay-header { 
            padding: 20px; background: var(--header-bg); border-bottom: 1px solid #333; 
        }

        #search-input {
            width: 100%; padding: 12px; background: #222; border: 1px solid #444;
            border-radius: 10px; color: white; margin-top: 10px; font-size: 16px;
        }

        #list-container { overflow-y: auto; flex: 1; padding-bottom: 50px; }

        .category-header {
            padding: 15px 20px 5px; font-size: 13px; font-weight: bold;
            color: var(--text-dim); text-transform: uppercase; letter-spacing: 1px;
            background: var(--bg-color); position: sticky; top: 0;
        }

        .unit-item {
            padding: 18px 20px; border-bottom: 1px solid #1a1a1a;
            display: flex; justify-content: space-between; align-items: center;
            font-size: 17px; cursor: pointer;
        }
        .unit-item:active { background: #222; }
        .unit-symbol { color: var(--text-dim); font-size: 15px; }

        /* --- MAIN CONVERTER UI --- */
        .display-area {
            flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 8px;
        }

        .card {
            background: var(--card-color); padding: 20px; border-radius: 24px;
            display: flex; justify-content: space-between; align-items: center;
            min-height: 110px; cursor: pointer;
        }

        .unit-info { display: flex; flex-direction: column; gap: 4px; }
        .unit-name-big { font-weight: bold; font-size: 20px; }
        .unit-symbol-small { color: var(--text-dim); font-size: 14px; }
        
        .value { 
            font-size: 30px; color: var(--accent-color); font-weight: 300; 
            text-align: right; word-break: break-all; max-width: 60%;
        }

        .middle-bar {
            display: flex; justify-content: flex-end; align-items: center; padding: 0 10px;
        }

        .swap-btn {
            background: #222; border: none; color: var(--accent-color);
            width: 44px; height: 44px; border-radius: 50%; font-size: 20px; cursor: pointer;
        }

        /* --- KEYPAD (With '00') --- */
        .keypad {
            display: grid; grid-template-columns: repeat(4, 1fr); /* 4 Columns layout */
            gap: 10px; padding-bottom: env(safe-area-inset-bottom); margin-top: 10px;
        }

        .key {
            height: clamp(60px, 11vh, 85px);
            border: none; background: transparent; color: white; font-size: 24px;
            border-radius: 40px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
        }
        .key:active { background: #333; }
        .orange { color: var(--accent-color); font-weight: 500; }
        .red { color: #ff453a; font-weight: 600; }

        .number-key { font-size: 28px; }
        .double-zero { font-size: 24px; letter-spacing: -1px; }

    </style>
</head>
<body>

<div class="app-container">
    
    <div id="selector-overlay">
        <div class="overlay-header">
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span style="font-weight:700; font-size:18px;">Select Unit</span>
                <span onclick="closeSelector()" style="color:var(--accent-color); font-weight:600; cursor:pointer;">Cancel</span>
            </div>
            <input type="text" id="search-input" placeholder="Search (e.g. Ounce, Ton)" onkeyup="renderList()">
        </div>
        <div id="list-container"></div>
    </div>

    <div class="display-area">
        <div class="card" onclick="openSelector('from')">
            <div class="unit-info">
                <span class="unit-name-big" id="from-name">Kilogram</span>
                <span class="unit-symbol-small" id="from-symbol">kg</span>
            </div>
            <div class="value" id="input-val">1</div>
        </div>

        <div class="middle-bar">
            <button class="swap-btn" onclick="swap()">⇅</button>
        </div>

        <div class="card" onclick="openSelector('to')">
            <div class="unit-info">
                <span class="unit-name-big" id="to-name">Ounce</span>
                <span class="unit-symbol-small" id="to-symbol">oz</span>
            </div>
            <div class="value" id="output-val">35.2739619</div>
        </div>
    </div>

    <div class="keypad">
        <button class="key number-key" onclick="press('7')">7</button>
        <button class="key number-key" onclick="press('8')">8</button>
        <button class="key number-key" onclick="press('9')">9</button>
        <button class="key red" onclick="backspace()">⌫</button>

        <button class="key number-key" onclick="press('4')">4</button>
        <button class="key number-key" onclick="press('5')">5</button>
        <button class="key number-key" onclick="press('6')">6</button>
        <button class="key red" onclick="clearAll()">AC</button>

        <button class="key number-key" onclick="press('1')">1</button>
        <button class="key number-key" onclick="press('2')">2</button>
        <button class="key number-key" onclick="press('3')">3</button>
        <button class="key" style="visibility:hidden"></button>

        <button class="key number-key" onclick="press('0')">0</button>
        <button class="key double-zero" onclick="press('00')">00</button>
        <button class="key orange" onclick="press('.')">.</button>
        <button class="key" style="visibility:hidden"></button>
    </div>
</div>

<script>
    // --- DATA: Conversion Factors relative to 1 Gram (g) ---
    const categories = {
        "Metric Units": [
            { name: "Tonne", sym: "t", factor: 1000000 },
            { name: "Quintal", sym: "q", factor: 100000 },
            { name: "Kilogram", sym: "kg", factor: 1000 },
            { name: "Gram", sym: "g", factor: 1 },
            { name: "Milligram", sym: "mg", factor: 0.001 },
            { name: "Microgram", sym: "μg", factor: 0.000001 },
            { name: "Carat", sym: "ct", factor: 0.2 }
        ],
        "Imperial Units": [
            { name: "Long ton", sym: "lt", factor: 1016046.91 },  // UK
            { name: "Short ton", sym: "st", factor: 907184.74 },   // US
            { name: "Long hundredweight", sym: "lg cwt", factor: 50802.35 },
            { name: "Short hundredweight", sym: "sh cwt", factor: 45359.24 },
            { name: "Stone", sym: "st", factor: 6350.29 },
            { name: "Pound", sym: "lb", factor: 453.59237 },
            { name: "Ounce", sym: "oz", factor: 28.34952 },
            { name: "Dram", sym: "dr", factor: 1.77185 }
        ],
        "Chinese Units": [
            { name: "Dàn", sym: "dàn", factor: 50000 },
            { name: "Jīn", sym: "jīn", factor: 500 },
            { name: "Liǎng", sym: "liǎng", factor: 50 },
            { name: "Qián", sym: "qián", factor: 5 }
        ]
    };

    // --- STATE ---
    let input = "1";
    let fromUnit = categories["Metric Units"][2]; // Kilogram
    let toUnit = categories["Imperial Units"][6]; // Ounce
    let targetSide = 'from';

    // --- INIT ---
    updateUI();

    // --- LOGIC ---
    function updateUI() {
        document.getElementById('input-val').innerText = input;
        
        const val = parseFloat(input);
        // Calculation: Input * (FromFactor / ToFactor)
        const result = val * (fromUnit.factor / toUnit.factor);
        
        let displayResult;
        if (result === 0) displayResult = "0";
        // Precision logic: use scientific notation for extremes, else high-precision float
        else if (result < 0.000001 || result > 10000000) displayResult = result.toExponential(5);
        else displayResult = parseFloat(result.toFixed(7)); // 7 decimals as seen in screenshot

        document.getElementById('output-val').innerText = displayResult;

        // Update Text
        document.getElementById('from-name').innerText = fromUnit.name;
        document.getElementById('from-symbol').innerText = fromUnit.sym;
        document.getElementById('to-name').innerText = toUnit.name;
        document.getElementById('to-symbol').innerText = toUnit.sym;
    }

    function press(key) {
        if (input === "0" && key !== ".") input = key;
        else if (!(key === "." && input.includes("."))) {
            if (input.length < 12) input += key;
        }
        updateUI();
    }

    function backspace() {
        input = input.slice(0, -1);
        if (input === "") input = "0";
        updateUI();
    }

    function clearAll() {
        input = "0";
        updateUI();
    }

    function swap() {
        [fromUnit, toUnit] = [toUnit, fromUnit];
        updateUI();
    }

    // --- MENU LOGIC ---
    function openSelector(side) {
        targetSide = side;
        document.getElementById('selector-overlay').style.display = "flex";
        document.getElementById('search-input').value = "";
        renderList();
    }

    function closeSelector() {
        document.getElementById('selector-overlay').style.display = "none";
    }

    function renderList() {
        const query = document.getElementById('search-input').value.toLowerCase();
        const container = document.getElementById('list-container');
        container.innerHTML = "";

        for (const [category, units] of Object.entries(categories)) {
            const filtered = units.filter(u => u.name.toLowerCase().includes(query) || u.sym.toLowerCase().includes(query));

            if (filtered.length > 0) {
                const header = document.createElement('div');
                header.className = "category-header";
                header.innerText = category;
                container.appendChild(header);

                filtered.forEach(u => {
                    const div = document.createElement('div');
                    div.className = "unit-item";
                    div.innerHTML = `<span>${u.name}</span><span class="unit-symbol">${u.sym}</span>`;
                    div.onclick = () => selectUnit(u);
                    container.appendChild(div);
                });
            }
        }
    }

    function selectUnit(u) {
        if (targetSide === 'from') fromUnit = u;
        else toUnit = u;
        closeSelector();
        updateUI();
    }
</script>

</body>
</html>