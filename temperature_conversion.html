<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>temperature Conversion</title>
    <style>
        :root {
            --bg-color: #000000;
            --card-color: #1c1c1c;
            --accent-color: #ff9f0a;
            --text-main: #ffffff;
            --text-dim: #888888;
            --sheet-bg: #1a1a1a;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            background-color: var(--bg-color); color: white;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            overflow: hidden;
        }

        .app-container {
            display: flex; flex-direction: column; height: 100dvh;
            padding: 16px; max-width: 500px; margin: 0 auto;
            position: relative;
        }

        /* --- BOTTOM SHEET MENU (Adaptive UX) --- */
        /* Unlike previous full-screen lists, this only covers the bottom */
        #bottom-sheet-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); /* Dimmed Background */
            z-index: 100;
            display: none; align-items: flex-end; /* Aligns sheet to bottom */
            backdrop-filter: blur(2px);
            opacity: 0; transition: opacity 0.2s ease;
        }

        #bottom-sheet {
            width: 100%; background: var(--sheet-bg);
            border-top-left-radius: 24px; border-top-right-radius: 24px;
            padding-bottom: 30px;
            transform: translateY(100%); transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .sheet-header {
            padding: 20px; border-bottom: 1px solid #333;
            display: flex; justify-content: space-between; align-items: center;
        }

        .sheet-title { font-weight: 700; font-size: 18px; }
        .sheet-cancel { color: var(--accent-color); font-weight: 600; cursor: pointer; font-size: 16px; border:none; background:none;}

        .unit-item {
            padding: 18px 25px; border-bottom: 1px solid #222;
            display: flex; justify-content: space-between; align-items: center;
            font-size: 18px; cursor: pointer;
        }
        .unit-item:active { background: #333; }
        .unit-symbol { color: var(--text-dim); }

        /* --- CONVERTER UI --- */
        .display-area {
            flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 8px;
        }

        .card {
            background: var(--card-color); padding: 20px; border-radius: 24px;
            display: flex; justify-content: space-between; align-items: center;
            min-height: 110px; cursor: pointer;
        }

        .unit-info { display: flex; flex-direction: column; gap: 4px; }
        .unit-name-big { font-weight: bold; font-size: 20px; }
        .unit-symbol-small { color: var(--text-dim); font-size: 14px; }
        
        .value { 
            font-size: 32px; color: var(--accent-color); font-weight: 300; 
            text-align: right; word-break: break-all; max-width: 60%;
        }

        .middle-bar {
            display: flex; justify-content: flex-end; align-items: center; padding: 0 10px;
        }

        .swap-btn {
            background: #222; border: none; color: var(--accent-color);
            width: 44px; height: 44px; border-radius: 50%; font-size: 20px; cursor: pointer;
        }

        /* --- ADAPTIVE KEYPAD (With +/- Button) --- */
        .keypad {
            display: grid; grid-template-columns: repeat(4, 1fr); 
            gap: 10px; padding-bottom: env(safe-area-inset-bottom); margin-top: 10px;
        }

        .key {
            height: clamp(60px, 11vh, 85px);
            border: none; background: transparent; color: white; font-size: 26px;
            border-radius: 40px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
        }
        .key:active { background: #333; }
        .orange { color: var(--accent-color); font-weight: 500; }
        .red { color: #ff453a; font-weight: 600; }
        
        /* Specific Styles for Temperature Layout */
        .number-key { font-size: 28px; }
        .plus-minus { font-size: 26px; }

    </style>
</head>
<body>

<div class="app-container">
    
    <div id="bottom-sheet-overlay" onclick="closeSheet(event)">
        <div id="bottom-sheet" onclick="event.stopPropagation()">
            <div class="sheet-header">
                <span class="sheet-title">Select Unit</span>
                <button class="sheet-cancel" onclick="closeSheet()">Cancel</button>
            </div>
            <div id="list-container">
                </div>
        </div>
    </div>

    <div class="display-area">
        <div class="card" onclick="openSheet('from')">
            <div class="unit-info">
                <span class="unit-name-big" id="from-name">Celsius</span>
                <span class="unit-symbol-small" id="from-symbol">°C</span>
            </div>
            <div class="value" id="input-val">1</div>
        </div>

        <div class="middle-bar">
            <button class="swap-btn" onclick="swap()">⇅</button>
        </div>

        <div class="card" onclick="openSheet('to')">
            <div class="unit-info">
                <span class="unit-name-big" id="to-name">Fahrenheit</span>
                <span class="unit-symbol-small" id="to-symbol">°F</span>
            </div>
            <div class="value" id="output-val">33.8</div>
        </div>
    </div>

    <div class="keypad">
        <button class="key number-key" onclick="press('7')">7</button>
        <button class="key number-key" onclick="press('8')">8</button>
        <button class="key number-key" onclick="press('9')">9</button>
        <button class="key red" onclick="backspace()">⌫</button>

        <button class="key number-key" onclick="press('4')">4</button>
        <button class="key number-key" onclick="press('5')">5</button>
        <button class="key number-key" onclick="press('6')">6</button>
        <button class="key red" onclick="clearAll()">AC</button>

        <button class="key number-key" onclick="press('1')">1</button>
        <button class="key number-key" onclick="press('2')">2</button>
        <button class="key number-key" onclick="press('3')">3</button>
        <button class="key plus-minus" onclick="toggleSign()">+/-</button>

        <button class="key number-key" onclick="press('0')">0</button>
        <button class="key orange" onclick="press('.')">.</button>
        <button class="key" style="visibility:hidden"></button>
        <button class="key" style="visibility:hidden"></button>
    </div>
</div>

<script>
    // --- DATA: Temperature Units ---
    // Note: Temp conversion requires formulas, not just factors.
    const units = [
        { name: "Celsius", sym: "°C", id: "c" },
        { name: "Fahrenheit", sym: "°F", id: "f" },
        { name: "Kelvin", sym: "K", id: "k" },
        { name: "Rankine", sym: "°R", id: "r" },
        { name: "Reaumur", sym: "°Re", id: "re" }
    ];

    // --- STATE ---
    let input = "1";
    let fromUnit = units[0]; // Celsius
    let toUnit = units[1];   // Fahrenheit
    let targetSide = 'from';

    // --- INITIALIZATION ---
    renderList();
    updateUI();

    // --- LOGIC ---
    function convert(val, fromID, toID) {
        if (fromID === toID) return val;

        // Step 1: Convert everything to Celsius first
        let celsius;
        switch (fromID) {
            case 'c': celsius = val; break;
            case 'f': celsius = (val - 32) * 5/9; break;
            case 'k': celsius = val - 273.15; break;
            case 'r': celsius = (val - 491.67) * 5/9; break;
            case 're': celsius = val * 1.25; break;
        }

        // Step 2: Convert Celsius to Target
        let result;
        switch (toID) {
            case 'c': result = celsius; break;
            case 'f': result = (celsius * 9/5) + 32; break;
            case 'k': result = celsius + 273.15; break;
            case 'r': result = (celsius + 273.15) * 1.8; break;
            case 're': result = celsius * 0.8; break;
        }
        return result;
    }

    function updateUI() {
        document.getElementById('input-val').innerText = input;
        
        let val = parseFloat(input);
        if (isNaN(val)) val = 0; // Handle "-" case

        const result = convert(val, fromUnit.id, toUnit.id);
        
        // Formatting: Avoid -0 and clean up decimals
        let displayResult = parseFloat(result.toFixed(2));
        if (Object.is(displayResult, -0)) displayResult = 0;

        document.getElementById('output-val').innerText = displayResult;

        // Update Labels
        document.getElementById('from-name').innerText = fromUnit.name;
        document.getElementById('from-symbol').innerText = fromUnit.sym;
        document.getElementById('to-name').innerText = toUnit.name;
        document.getElementById('to-symbol').innerText = toUnit.sym;
    }

    function press(key) {
        if (input === "0" && key !== ".") input = key;
        else if (input === "-0" && key !== ".") input = "-" + key;
        else if (!(key === "." && input.includes("."))) {
            if (input.length < 10) input += key;
        }
        updateUI();
    }

    function toggleSign() {
        if (input.startsWith("-")) input = input.substring(1);
        else input = "-" + input;
        
        if (input === "-" || input === "") input = "0"; // Safety
        updateUI();
    }

    function backspace() {
        input = input.slice(0, -1);
        if (input === "" || input === "-") input = "0";
        updateUI();
    }

    function clearAll() {
        input = "0";
        updateUI();
    }

    function swap() {
        [fromUnit, toUnit] = [toUnit, fromUnit];
        updateUI();
    }

    // --- BOTTOM SHEET LOGIC ---
    function openSheet(side) {
        targetSide = side;
        const overlay = document.getElementById('bottom-sheet-overlay');
        const sheet = document.getElementById('bottom-sheet');
        
        overlay.style.display = "flex";
        // Small delay to allow CSS transition to work
        setTimeout(() => {
            overlay.style.opacity = "1";
            sheet.style.transform = "translateY(0)";
        }, 10);
    }

    function closeSheet(e) {
        if (e && e.target.id !== "bottom-sheet-overlay" && e.target.className !== "sheet-cancel") return;
        
        const overlay = document.getElementById('bottom-sheet-overlay');
        const sheet = document.getElementById('bottom-sheet');

        overlay.style.opacity = "0";
        sheet.style.transform = "translateY(100%)";
        
        setTimeout(() => {
            overlay.style.display = "none";
        }, 300);
    }

    function renderList() {
        const container = document.getElementById('list-container');
        container.innerHTML = "";
        
        units.forEach(u => {
            const div = document.createElement('div');
            div.className = "unit-item";
            div.innerHTML = `<span>${u.name}</span><span class="unit-symbol">${u.sym}</span>`;
            div.onclick = () => selectUnit(u);
            container.appendChild(div);
        });
    }

    function selectUnit(u) {
        if (targetSide === 'from') fromUnit = u;
        else toUnit = u;
        
        // Manually trigger close to ensure animation plays
        const overlay = document.getElementById('bottom-sheet-overlay');
        const sheet = document.getElementById('bottom-sheet');
        overlay.style.opacity = "0";
        sheet.style.transform = "translateY(100%)";
        setTimeout(() => { overlay.style.display = "none"; }, 300);

        updateUI();
    }
</script>

</body>

</html>
